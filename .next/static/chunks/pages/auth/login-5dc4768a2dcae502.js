(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{163:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return s(9042)}])},9042:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(5893),r=s(7294),n=s(9008),i=s.n(n);let o="https://jxdkwfhsicynyvhkutjm.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp4ZGt3ZmhzaWN5bnl2aGt1dGptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjUxNzc0NDYsImV4cCI6MjA0MDc1MzQ0Nn0.dprP2hhT-gKqg3hxrKmFM0aOgQQtZBhGb9wKoHJPZYU";function d(){let[e,t]=(0,r.useState)("child"),[s,n]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[h,x]=(0,r.useState)(""),[g,y]=(0,r.useState)(!1),[p,f]=(0,r.useState)(""),b=async e=>{e.preventDefault(),y(!0),f("");try{let e=await fetch("".concat(o,"/functions/v1/server/auth/child-login"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({username:s,pin:d})}),t=await e.json();t.success?window.location.href="/child/home":f(t.error||"Login failed")}catch(e){f("Login failed. Please try again.")}finally{y(!1)}},j=async e=>{e.preventDefault(),y(!0),f("");try{let e=await fetch("".concat(o,"/auth/v1/token?grant_type=password"),{method:"POST",headers:{"Content-Type":"application/json",apikey:l},body:JSON.stringify({email:u,password:h})}),t=await e.json();t.access_token?(localStorage.setItem("supabase.auth.token",JSON.stringify(t)),window.location.href="/dashboard"):f("Invalid email or password")}catch(e){f("Login failed. Please try again.")}finally{y(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"Login - The Lift"}),(0,a.jsx)("meta",{name:"description",content:"Login to The Lift wellbeing platform"})]}),(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-3xl font-medium text-gray-900",children:"Sign in to The Lift"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Choose your sign-in method below"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex border-b border-gray-200 mb-6",children:[(0,a.jsx)("button",{onClick:()=>t("child"),className:"flex-1 py-2 px-4 text-center font-medium ".concat("child"===e?"text-gray-900 border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700"),children:"Child"}),(0,a.jsx)("button",{onClick:()=>t("adult"),className:"flex-1 py-2 px-4 text-center font-medium ".concat("adult"===e?"text-gray-900 border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700"),children:"Adult"})]}),"child"===e&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Child Sign In"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Enter your username and PIN to access your activities"}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,a.jsx)("input",{id:"username",type:"text",required:!0,value:s,onChange:e=>n(e.target.value),placeholder:"Enter your username",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-gray-500 focus:border-gray-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"pin",className:"block text-sm font-medium text-gray-700",children:"PIN"}),(0,a.jsx)("input",{id:"pin",type:"password",required:!0,maxLength:4,value:d,onChange:e=>c(e.target.value),placeholder:"Enter your PIN",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-gray-500 focus:border-gray-500"})]}),p&&(0,a.jsx)("div",{className:"text-red-600 text-sm",children:p}),(0,a.jsx)("button",{type:"submit",disabled:g,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-800 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50",children:g?"Signing in...":"Sign In"})]})]}),"adult"===e&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Adult Sign In"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Sign in with your email and password"}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)("input",{id:"email",type:"email",required:!0,value:u,onChange:e=>m(e.target.value),placeholder:"practitioner@thelift.app",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-gray-500 focus:border-gray-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,a.jsx)("input",{id:"password",type:"password",required:!0,value:h,onChange:e=>x(e.target.value),placeholder:"Enter your password",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-gray-500 focus:border-gray-500"})]}),p&&(0,a.jsx)("div",{className:"text-red-600 text-sm",children:p}),(0,a.jsx)("button",{type:"submit",disabled:g,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-800 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50",children:g?"Signing in...":"Sign In"})]})]})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,a.jsx)("span",{className:"text-gray-800",children:"Contact your administrator"})]})})]})})]})}},9008:function(e,t,s){e.exports=s(3867)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=163)}),_N_E=e.O()}]);